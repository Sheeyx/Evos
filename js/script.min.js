let cards=document.getElementById("cards"),select=document.getElementById("select"),open=document.querySelector(".select"),result=document.querySelector(".cart__container"),summa=0,food=[];const show=n=>{cards.innerHTML="",n.forEach((n=>{cards.innerHTML+=`\n        <div class="card" onclick="clicked(${n.id})">\n            <div class="first">\n                <img src="./img/lavash.png" alt="">\n            </div>\n            <div class="second">\n                <h2>${n.title}</h2>\n                <div class="panel">\n                    <button class="big">Big</button>\n                    <button class="mini">Mini</button>\n                </div>\n                <div class="cost">\n                    <p>${n.cost}</p>\n                </div>\n            </div>\n        </div>\n        `}))},plus=()=>{let n=document.getElementById("cost"),t=document.querySelector(".counted");count++,t.innerHTML=count,n.innerHTML=count*summa},minus=()=>{let n=document.getElementById("cost"),t=document.querySelector(".counted");if(count<2)return!1;count--,t.innerHTML=count,n.innerHTML=count*summa};let count=1;const clicked=n=>{sort=food.filter((t=>t.id==n)),console.log(food),sort.forEach((n=>{select.innerHTML=`\n        <div class="select__card">\n            <div class="add">\n            <button onclick="add(${n.id})">Добавить</button>\n            <button class="close" onclick="closed()"><img src="./img/close.svg" alt="">\n            </button>\n            </div> \n            <div class="image">\n                <img src="./img/doner.png" alt="">\n            </div>\n            <div class="info">\n                <h1>${n.title}</h1>\n                <div class="info__panel">\n                    <button class="big">Big</button>\n                    <button class="mini">Mini</button>\n                </div>\n                <div class="info__click">\n                    <div class="cost">\n                        <p id="cost">${n.cost}</p>\n                    </div>\n                    <div class="counter">\n                        <button class="minus" onclick="minus()"><img src="./img/minus.png" alt=""></button>\n                        <p class="counted">${count}</p>\n                        <button class="plus" onclick="plus()"><img src="./img/plus.png" alt=""></button>\n                        \n                    </div>\n                </div>\n            </div>\n        </div>\n        `,summa=n.cost,console.log(n.cost)})),document.getElementById("select").classList.add("show")},closed=()=>{document.getElementById("select").classList.remove("show"),count=1};let data=[],common=[];const add=n=>{fetch("http://localhost:3005/food").then((n=>n.json())).then((n=>{food=n})),temp=food.findIndex((t=>t.id==n)),data.push(food[temp]),data[data.length-1].count=count,data[data.length-1].cost=summa*count,renders(data),count=1,summa=0,document.getElementById("select").classList.remove("show")},delet=n=>{let t=document.querySelector(".fsumma");data.splice(n,1),console.log(data),data.length>0?renders(data):(result.innerHTML='\n        <h1>Корзина</h1>\n        <div class="cart__container--img">\n            <img src="./img/karzinka.svg">\n            <h2>Корзинка пусто</h2>\n        </div>\n    ',t.innerHTML=0,console.log(data))};fetch("http://localhost:3005/food").then((n=>n.json())).then((n=>{food=n,show(food)}));const renders=n=>{result.innerHTML="<h1>Корзина</h1>",n.forEach(((n,t)=>{result.innerHTML+=` \n              <div class="cart__container--info">\n                  <div class="items">\n                      <div><img src="./img/lavash.png" alt=""></div>\n                      <div class="items__text">\n                          <h2>${n.title}</h2>\n                          <div class="card"><p>${n.cost}</p></div>\n                      </div>\n                  </div>\n                  <div class="buttons">\n                      <div class="buttons__delete">\n                          <button class="del" onclick="delet(${t})"><img src="./img/del.png" alt=""></button>\n                      </div>\n                      <div>\n                      </div>\n                  </div>\n              </div>\n        `}));let t=document.querySelector(".fsumma"),e=0;for(i=0;i<n.length;i++)e+=n[i].cost;t.innerHTML=e,result.innerHTML+=`<button class="order__btn">\n  <p>Оформить заказ</p>\n  <p>${e}</p>\n    </button>`},korzinka=()=>{document.querySelector(".cart").classList.add("shows")};window.addEventListener("click",(n=>{console.log(n.target),n.target==document.querySelector(".cart")&&n.target!==document.querySelector(".cart__container")&&document.querySelector(".cart").classList.remove("shows")}));